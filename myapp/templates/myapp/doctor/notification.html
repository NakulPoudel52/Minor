{%extends 'myapp/doctor/doctordashboard.html'%}
{%load static%}
{% load crispy_forms_tags %}

{% block body %}
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>

{%if flag%}
<script>alert('Done')
</script>
{%endif%}

<section class="team-agile py-lg-5">
    <div class="title-section text-center pb-lg-5">
        <h4>world of medicine</h4>
        
        <h3 class="w3ls-title text-center text-capitalize">Your Notifications</h3>
    </div>
    {%for info in info%}
    <div class="container py-sm-5 pt-5 pb-0">
        
        
        <div class="row mt-5 pb-lg-5">
            <div class="col-md-4 border p-0 my-auto">
                <img src="{{info.patients.profile_pic.url}}" class="img-fluid" alt="team-img" />
            </div>
            <div class="col-md-8 team-text mt-md-0 mt-5">
                <h4>MR/S. {{info.patients.user.username}}</h4>
                <small>PATIENT_Id:{{info.patients.id}}</small>
                <p class="my-3">Message:{{info.message_patient}}</p>
                <ul class="list-group mb-3">
                    <li class="list-group-item border-0">
                        <i class="far fa-check-square  mr-3"></i>Date: {{info.meeting.date}}</li>
                    <li class="list-group-item border-0 py-0">
                        <i class="far fa-check-square  mr-3"></i>
                        Start time: {{info.meeting.start_time}}</li>
                    <li class="list-group-item border-0">
                        <i class="far fa-check-square  mr-3"></i>
                        End time: {{info.meeting.end_time}} </li>
                    {%comment%}
                    <li class="list-group-item border-0 py-0">
                        <i class="far fa-check-square  mr-3"></i><a href="#" class="btn_apt" data-toggle="modal" data-target="#exampleModal">Monitor </a>
                    </li>  
                    {%endcomment%}
                    <li>
                       
                    </li>
                    
                
                </ul>
                
                <a href="#" class="btn_apt" data-toggle="modal" data-target="#exampleModalLabel2">Acknowledge appointment </a>
            </div>
        </div>
        
        
    </div>
       
</section>

<!-- //team -->


<!-- //quick contact -->
<!-- copyright -->

<!-- //copyright -->
<!-- //Appointment modal -->
<div class="modal fade" id="exampleModalLabel2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel2" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Fill details below to confirm appointment request</h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="wthree-info">

                    <div class="login">
                        <form action="{%url 'notification_doctor'%}" method="post">
                            {% csrf_token %}
                            {{a_form|crispy}}
                            {{n_form.message_patient|as_crispy_field}}
                              <button value="{{info.patients.id}}" name="patient" class="btn_apt" data-toggle="modal" data-target="#exampleModalLabel2">Acknowledge appointment </a>

                         
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{%comment%}
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModal" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModal">Graph</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            
            <div id="container" style="width: 75%;">
  
                <canvas id="line-chart"></canvas>
              </div>
          
              {% for i in info.patients.monitor.suball %}
               {%if i.subject == "temperature" %}
                {{i.value1}}
               {{i.timestamp}}
               {%endif%}
              {%endfor%}
              <script>
              var ctx = document.getElementById('line-chart').getContext('2d');
              var lineChart = new Chart(ctx, {
                type: 'line',
                data: {

                  labels: [1,2,3,4],
                  datasets: [
                    {
                      label: "temperature",
                      data: [5,6,2,4]
                    }
                  ]
                }
              });
              </script>
              
             

              <div id="container" style="width: 75%;">
  
                <canvas id="pline-chart"></canvas>
              </div>
              <script>
              var ctx = document.getElementById('pline-chart').getContext('2d');
              var lineChart = new Chart(ctx, {
                type: 'line',
                data: {
                  labels: {{tsp|safe}},
                  datasets: [{
                    label: "systolic",
                    data: {{sp|safe}},
                    backgroundColor: "rgba(255,99,132,0.2)",
                  }, {
                    label: "diastolic",
                    data: {{dp|safe}},
                    backgroundColor: "rgba(99,255,132,0.2)",
                  }]
                }
                });
              </script>
              <div id="container" style="width: 75%;">
                
                <canvas id="bline-chart"></canvas>
              </div>
        
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          
        </div>
      </div>
    </div>
</div>
{%endcomment%}
{%endfor%}
<!-- //Appointment modal -->
<!-- js -->
<script src="{%static 'myapp/js/jquery-2.2.3.min.js'%}"></script>
<!-- //js -->
<!-- //fixed quick contact -->
<script>
    $(function () {
        var hidden = true;
        $(".heading").click(function () {
            if (hidden) {
                $(this).parent('.outer-col').animate({
                    bottom: "0"
                }, 1200);
            } else {
                $(this).parent('.outer-col').animate({
                    bottom: "-305px"
                }, 1200);
            }
            hidden = !hidden;
        });
    });
</script>

<!-- //fixed quick contact -->
<!--start-date-piker-->
<link rel="stylesheet" href="{%static 'myapp/css/jquery-ui.css'%}" />
<script src="{%static 'myapp/js/jquery-ui.js'%}"></script>
<script>
    $(function () {
        $("#datepicker,#datepicker1").datepicker();
    });
</script>
<!-- //End-date-piker -->
<!-- start-smooth-scrolling -->
<script src="{%static 'myapp/js/easing.js'%}"></script>
<script>
    jQuery(document).ready(function ($) {
        $(".scroll").click(function (event) {
            event.preventDefault();

            $('html,body').animate({
                scrollTop: $(this.hash).offset().top
            }, 1000);
        });
    });
</script>
<script src="{%static 'myapp/js/SmoothScroll.min.js'%}"></script>
    <!-- //end-smooth-scrolling -->
    <!-- Bootstrap core JavaScript
================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="{%static 'myapp/js/bootstrap.js'%}"></script>
   
{% endblock %}